# Actions

## Links

- [Tim Warner Actions Course and Links](https://github.com/timothywarner/actions-cert-prep)
- [Github Actions Marketplace](https://github.com/marketplace?type=actions)
- [Github Docs Actions](https://docs.github.com/en/actions)
- [Github Docs Actions Contexts](https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/accessing-contextual-information-about-workflow-runs#github-context)
- [Containerised Services](https://docs.github.com/en/actions/use-cases-and-examples/using-containerized-services) - See [Example](containerised-services.yml). I think this is better handled with docker compose so can be done locally then too.

## Action Structure

- Workflow > Jobs > Steps > Action
- [Detailed Hello World](hello-world.yml)

```yaml
name: hello-world
permissions:
  contents: read
on: [push]
jobs:
    job1:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v2
            - name: Hello World
              run: echo "Hello World"
            with:
                MY_VAR: "Griff
```

## Triggers

### Push

```yaml
on:
  push:
    branches:
      - main
      - develop
```

### Pull Request

```yaml
on:
  pull_request:
    branches:
      - main
```

### Schedule

```yaml
on:
  schedule:
    - cron: "0 0 * * * *"
```

### Manual

```yaml
on: workflow_dispatch
```

### Webhook

```yaml
on:
  webhook:
    url: www.example.com
```

## Conditions

```yaml
jobs:
  job1:
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Hello World
        run: echo "Hello World"
    needs: [job1]
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Hello World
        run: echo "Hello World"
```

## Security

### GITHUB_TOKEN

- The secrets.GITHUB_TOKEN is a secret token that is automatically generated by GitHub and is used to authenticate in the GitHub API. It is automatically available in the GitHub Actions environment. It is recommended to use the GITHUB_TOKEN instead of a personal access token. The GITHUB_TOKEN has read and write permissions to the repository. It is not possible to change the permissions of the GITHUB_TOKEN.

### CodeQL

- CodeQL is a static analysis tool that is used to find security vulnerabilities in code. It is available in the GitHub Advanced Security package. It is possible to use CodeQL in GitHub Actions to find security vulnerabilities in the code.
